rules_version = '2';

// Regras de segurança para o Firebase Storage do Aqua Vista Monchique
service firebase.storage {
  match /b/{bucket}/o {
    
    // Regras para galeria - Leitura pública, escrita apenas para admins autenticados
    match /gallery/{allPaths=**} {
      allow read: if true; // Público pode visualizar galeria
      allow write: if request.auth != null; // Apenas usuários autenticados podem fazer upload
    }
    
    // Regras para imagens de quartos - Leitura pública, escrita apenas para admins
    match /rooms/{roomId}/{allPaths=**} {
      allow read: if true; // Público pode ver imagens dos quartos
      allow write: if request.auth != null; // Apenas admins autenticados podem fazer upload
    }
    
    // Regras para documentos de reservas (caso necessário no futuro)
    match /bookings/{bookingId}/{allPaths=**} {
      allow read: if request.auth != null; // Apenas usuários autenticados
      allow write: if request.auth != null; // Apenas usuários autenticados
    }
    
    // Regras para avatars de usuários (caso necessário no futuro)
    match /users/{userId}/{allPaths=**} {
      allow read: if true; // Público pode ver avatars
      allow write: if request.auth != null && request.auth.uid == userId; // Apenas o próprio usuário
    }
    
    // Regras para arquivos administrativos
    match /admin/{allPaths=**} {
      allow read, write: if request.auth != null; // Apenas admins autenticados
    }
    
    // Regra de fallback - Bloquear tudo que não foi especificamente permitido
    match /{allPaths=**} {
      allow read: if false;
      allow write: if false;
    }
  }
} 